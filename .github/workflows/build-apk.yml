- name: Set up JDK 17
  uses: actions/setup-java@v4
  with:
    java-version: '17'
    distribution: 'temurin'

- name: Setup Android SDK
  uses: android-actions/setup-android@v3
    
- name: Generate Gradle Wrapper
  run: |
    wget https://services.gradle.org/distributions/gradle-8.0-bin.zip
    unzip -q gradle-8.0-bin.zip
    ./gradle-8.0/bin/gradle wrapper --gradle-version=8.0 --distribution-type=bin
    
- name: Make gradlew executable
  run: chmod +x ./gradlew
    
- name: Build with Gradle (修复队列错误)
  run: |
    ./gradlew clean
    ./gradlew assembleDebug \
      --no-parallel \
      --no-configure-on-demand \
      --max-workers=1 \
      --no-daemon \
      --stacktrace
